from graphviz import Digraph

# Crear un objeto Digraph para el diagrama ER
er_diagram = Digraph('ER_Diagram', format='png')
er_diagram.attr(rankdir='LR', size='8,5')

# Agregar nodos para entidades
er_diagram.node('Usuario', shape='box', style='filled', color='lightblue', label='Usuario\nID_Usuario (PK)\nNombre\nEmail\nRol\nContraseña')
er_diagram.node('Factura', shape='box', style='filled', color='lightgreen', label='Factura\nID_Factura (PK)\nFecha\nTotal\nEstado\nID_Usuario (FK)')
er_diagram.node('Cliente', shape='box', style='filled', color='lightyellow', label='Cliente\nID_Cliente (PK)\nNombre\nRUC\nDirección\nTeléfono')
er_diagram.node('Detalle_Factura', shape='box', style='filled', color='orange', label='Detalle_Factura\nID_Detalle (PK)\nID_Factura (FK)\nProducto\nCantidad\nPrecio_Unitario\nSubtotal')
er_diagram.node('Respaldo', shape='box', style='filled', color='lightpink', label='Respaldo\nID_Respaldo (PK)\nFecha\nRuta')

# Relación Usuario-Factura
er_diagram.edge('Usuario', 'Factura', label='1,N', arrowhead='crow', arrowtail='none')

# Relación Cliente-Factura
er_diagram.edge('Cliente', 'Factura', label='1,N', arrowhead='crow', arrowtail='none')

# Relación Factura-Detalle_Factura
er_diagram.edge('Factura', 'Detalle_Factura', label='1,N', arrowhead='crow', arrowtail='none')

# Relación Usuario-Respaldo
er_diagram.edge('Usuario', 'Respaldo', label='1,N', arrowhead='crow', arrowtail='none')

# Renderizar y guardar el diagrama
output_path = "/mnt/data/Babysoft_ER_Diagram.png"
er_diagram.render(output_path, cleanup=True)
output_path
